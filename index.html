
<!DOCTYPE html>
<html>
<head>
    <title>ريف ماب - زلزال الريف</title>
    <META charset="utf-8">
    <link rel="shortcut icon" href="images/earthquake/icon.png" />`
    <link href="css/style.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.6/css/bootstrap.css" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script type="text/javascript" src='http://www.ign.es/resources/sismologia/tproximos/terremotos.js'></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
    <script src="js/scroll.js"></script>
    <script src="http://maps.google.com/maps/api/js?sensor=false" type="text/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/1.0.2/Chart.js"></script>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    <style type="text/css">
        body { background: #DDDADA !important; } 
    </style>
    <script type="text/javascript">
        function dates(n){
            var month = new Array();
            var m = new Array(n);
            month[0]  = "Jan";
            month[1]  = "Feb";
            month[2]  = "Mar";
            month[3]  = "Apr";
            month[4]  = "May";
            month[5]  = "Jun";
            month[6]  = "Jul";
            month[7]  = "Aug";
            month[8]  = "Sep";
            month[9]  = "Oct";
            month[10] = "Nov";
            month[11] = "Dec";
            var d = new Date();
            var ts = d.getTime();
            for(var i=n; i>=0; i--){
                var twelveDays = ts - (i * 24 * 60 * 60 * 1000);
                m[i] = (new Date(twelveDays).getDate()+'-'+month[parseInt(new Date(twelveDays).getMonth())]);
            }
           return m.reverse();
        }
        function days(n){
            var d = new Date();
            var ts = d.getTime();
            var m = new Array(n);
            for(var i=n; i>=0; i--){
                var twelveDays = ts - (i * 24 * 60 * 60 * 1000);
                m[i] = parseInt(new Date(twelveDays).getDate());
            }
            return m.reverse();
        }
    </script>
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-75622646-1', 'auto');
  ga('send', 'pageview');

</script>
</head>

<body>
    <div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.5&appId=408824075955833";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
    <div class="header" dir="rtl" style="height:150px;background-color:#37B06D">
        <a href="/"><img src="images/earthquake/logo.png" height="130px" style="margin-right:10px">
        <img src="images/earthquake/desc.png" height="60px" width="30%" style="margin-top:55px"></a>
    </div>
    <br><br><br><br><br><br>
       <nav class="navbar navbar-inverse">
          <div class="container-fluid">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#mynav">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
            </div>
            <div class="collapse navbar-collapse" id="mynav">
              <ul class="nav navbar-nav navbar-right">
                <li><a href="contactus.html"><b>إتصل بنا</b></a></li>
                <li><a href="services.html"><b>خدمات</b></a></li>
                <li><a href="advice.html"><b>نصائح واجراءت</b></a></li>
                <li><a href="howitwork.html"><b>كيف يعمل الموقع؟</b></a></li>
                <li class="active"><a href="/"><b>الرئيسية</b></a></li>
              </ul>
            </div><!--/.nav-collapse -->
          </div>
        </nav>
    <div class="container"><br><br>
        <div dir="rtl" class="row">
            <div class="col-md-12 isa_warning">
                <span><font size="4">تابعنا على الفيسبوك :</font></span>
                <span  class="fb-like" data-href="https://www.facebook.com/&#x631;&#x64a;&#x641;-&#x645;&#x627;&#x628;-RifMap-916570698440464/" data-layout="button" data-action="like" data-show-faces="true" data-share="false"></span>
            </div>
        </div><br>
        <div dir="rtl" class="row">
            <div class="col-md-12 isa_info">
                <font size="4">كيف يعمل الموقع : <a href="howitwork.html">إضغط هنا</a></font> 
            </div>
        </div>
        <hr class="soften" />
        <div class="row" style="background-color:white">
            <div class="col-md-7 ">
                <br>
            <div id="map" style="height: 430px;"></div>
                <br>
            </div>
            <div class="col-md-5 ">
                <div class="table-responsive">    
                    <table id="arrestedDevelopment" class="table">
                        <thead>
                          <tr>
                            <th>العمق</th>
                            <th>الشدة</th>
                            <th>التاريخ</th>
                            <th>المكان</th>
                            <th>درجة الهزة</th>
                          </tr>
                        </thead>
                        <tbody>
            <script>
                var locations=new Array(dias3.features.length)
                for (i=0; i <dias3.features.length; i++)
                    locations[i]=new Array(7);
                var j = 0;
                for(var i = 0; i < dias3.features.length; i++){
                    var values = [];
                    var status = 1;
                    var tr = "";
                    values[6] = dias3.features[i].properties.typeplot;
                    values[5] = '<td>' + dias3.features[i].properties.mag + " " + dias3.features[i].properties.magtype + '</td>';
                    values[1] = dias3.features[i].geometry.coordinates[0] + ',' + dias3.features[i].geometry.coordinates[1];  
                    if(dias3.features[i].properties.loc.indexOf('ALBOR') > -1  && dias3.features[i].properties.loc.indexOf('SUR') > -1)
                        values[2] = '<td> '+'البوران'+' </td>';
                    else if(dias3.features[i].properties.loc.indexOf('ALHUCEMAS') > -1)
                        values[2] = '<td> '+'الحسيمة'+' </td>';
                    else
                        status = 0;
                    values[3] = '<td>'+dias3.features[i].properties.fecha+'</td>';
                    if(dias3.features[i].properties.intensidad.replace(/ /g,'').length != 0)
                        values[4] = '<td>'+dias3.features[i].properties.intensidad+'</td>';
                    else
                        values[4] = '<td>-</td>';
                    if(dias3.features[i].properties.depth.length != 0)
                        values[0] = '<td>'+dias3.features[i].properties.depth+'</td>';
                    else
                        values[0] = '<td>-</td>';
                    if(status == 1){
                        locations[j][0] = dias3.features[i].geometry.coordinates[1];
                        locations[j][1] = dias3.features[i].geometry.coordinates[0];
                        locations[j][2] = dias3.features[i].properties.mag;
                        locations[j][3] = dias3.features[i].properties.magtype;
                        locations[j][4] = values[2];
                        locations[j][5] = dias3.features[i].properties.fecha;
                        locations[j][6] = values[6];
                        if(values[6] >= 3)
                            tr = '<tr onclick="zoom('+j+')" style="cursor:pointer" class="isa_error">';
                        else if(values[6] == 2)
                            tr = '<tr onclick="zoom('+j+')" style="cursor:pointer" class="isa_warning">';
                        else if(values[6] == 1)
                            tr = '<tr onclick="zoom('+j+')" style="cursor:pointer;" class="isa_info">';
                        else
                            tr = '<tr onclick="zoom('+j+')" style="cursor:pointer">';
                        j++;
                        document.write(tr+values[0] +values[4] + values[3] + values[2] + values[5] + '</tr>');  
                    }
                }
                var map = new google.maps.Map(document.getElementById('map'), {
                  zoom: 8,
                  center: new google.maps.LatLng(35.5637, -3.6157),
                  mapTypeId: google.maps.MapTypeId.ROADMAP,
                  streetViewControl: false,
                  mapTypeControl: false
                });
                var marker, i; 
                markers = {};
                for (i = 0; i < locations.length; i++) { 
                    var contentString = '<h2 dir="rtl">'+locations[i][4]+'</h2><h4 dir="rtl">التاريخ : '+locations[i][5]+'</h4>'
                                        +'<h3 align="center">'+locations[i][2]+'<small>'+locations[i][3]+'</small></h3>';
                    marker = new google.maps.Marker({ 
                        position: new google.maps.LatLng(locations[i][0], locations[i][1]), 
                        map: map ,
                        icon : getCircle(locations[i][2], 'red'),
                        optimized: false
                    });
                    markers[i] = marker;
                    addInfoWindow(markers[i], contentString);
                }
                markers[0].setIcon('images/earthquake/pen_move.gif'); 
                function getCircle(magnitude, color) {
                  var circle = {
                    path: google.maps.SymbolPath.CIRCLE,
                    fillColor: color,
                    fillOpacity: .7,
                    scale: Math.pow(2, magnitude) / 2,
                    strokeColor: 'white',
                    strokeWeight: .5
                  };
                  return circle;
                }
                function addInfoWindow(marker, message) {

                    var infoWindow = new google.maps.InfoWindow({
                        content: message
                    });

                    google.maps.event.addListener(marker, 'click', function () {
                        infoWindow.open(map, marker);
                    });
                }
                function zoom(j){
                        map.panTo(markers[j].getPosition());
                        for(var i = 0; i < locations.length; i++)
                            markers[i].setIcon(getCircle(locations[i][2], 'red'));
                        markers[j].setIcon('images/earthquake/pen_move.gif'); 
                        map.setZoom(10);
                }
            </script>
                        </tbody>
</table>
                </div>
                <div dir="rtl" align="center"> 
                     <b>&ensp;هزة قوية&ensp;</b>
                     <img src="images/earthquake/red.png" width="20px" height="20px">
                     <b>&ensp;هزة متوسطة&ensp;</b>
                     <img src="images/earthquake/warning.png" width="17px" height="17px">
                     <b>&ensp;هزة ضعيفة&ensp;</b>
                     <img src="images/earthquake/blue.png" width="17px" height="17px">
                     <b>&ensp;هزة عادية&ensp;</b>
                     <img src="images/earthquake/white.png" width="18px" height="18px">
</div>
            </div>
        </div>
        <hr class="soften" />
        <div class="row" style="background-color:white;">
            <div class="col-md-5">
                <h4 dir="rtl" align="center"><b>عدد الهزات في كل ساعة</b></h4><br>
                <div dir="rtl" align="center">
                    <b>أخر </b>
                    <select id="daysS" onchange="changertime()">
                        <option value="0">10 يوم</option>
                        <option value="1">30 يوم</option>
                    </select>
                    <b>المدينة</b>
                    <select id="cityS" onchange="changertime()">
                        <option value="0">الحسيمة والبوران</option>
                        <option value="1">الحسيمة</option>
                        <option value="2">البوران</option>
                    </select>
                    <b>نوع الهزة </b>
                    <select id="typeS" onchange="changertime()">
                        <option value="0">جميع الهزات</option>
                        <option value="1">قوية ومتوسطة وضعيفة</option>
                        <option value="2">قوية ومتوسطة</option>
                        <option value="3">قوية</option>
                    </select>
                </div>
                <hr/>
                <div style="height:250px"><canvas id="mChart" style="height:200px"></canvas></div>
                <script>
                    var locationa = new Array(dias10.features.length)
                    for (i=0; i <locationa.length; i++)
                        locationa[i]=new Array(2);
                    var status = 0;
                    var j = 0;
                    for(var i=0;i<locationa.length;i++){
                        if(dias10.features[i].properties.loc.indexOf('ALBOR') > -1  && 
                           dias10.features[i].properties.loc.indexOf('SUR') > -1)
                            status = 1;
                        else if(dias10.features[i].properties.loc.indexOf('ALHUCEMAS') > -1)
                            status = 1;
                        else
                            status = 0;
                        if(status == 1){
                            locationa[j][0] = dias10.features[i].properties.fecha;
                            locationa[j][1] = dias10.features[i].properties.typeplot;
                            j++;
                        }
                    }
                    var hours = [];
                    for(var i = 0; i< 24; i++)
                        hours[i] = 0;
                    for(var i=0;i<locationa.length;i++){
                        hour = new Date(locationa[i][0]).getHours();
                        if(hour != 'NaN' && locationa[i][1] >= 0){
                            hours[parseInt(hour)]++;
                        }
                    }
                    var data = {
                        labels: ['00:00','01:00','02:00','03:00','04:00','05:00','06:00','07:00','08:00','09:00',
                                '10:00','11:00','12:00','13:00','14:00','15:00','16:00','17:00','18:00','19:00','20:00',
                                 '21:00','22:00','23:00'],
                        datasets: [
                            {
                                label: "عدد الهزات",
                                fillColor: "rgba(151,187,205,0.2)",
                                strokeColor: "rgba(151,187,205,1)",
                                pointColor: "rgba(151,187,205,1)",
                                pointStrokeColor: "#fff",
                                pointHighlightFill: "#fff",
                                pointHighlightStroke: "rgba(151,187,205,1)",
                                data: hours
                            }
                        ]
                    };
                    var ctx1 = document.getElementById("mChart").getContext("2d");
                    var mLineChart = new Chart(ctx1).Line(data,{responsive: true,maintainAspectRatio: false,scaleStartValue : 0});
                </script>
            </div>
            <div class="col-md-2">
                <br>
                <br>
                <br>
                <center>
                <img src="images/earthquake/fb.png" class="img-responsive">
               <div class="fb-like" data-href="https://www.facebook.com/&#x631;&#x64a;&#x641;-&#x645;&#x627;&#x628;-RifMap-916570698440464/" data-layout="button" data-action="like" data-show-faces="true" data-share="false"></div></center>
                <br><br><br>
            </div>
            <div class="col-md-5">
                <h4 dir="rtl" align="center"><b>عدد الهزات حسب الأيام</b></h4><br>
                <div dir="rtl" align="center">
                    <b>أخر </b>
                    <select id="daysF" onchange="changer()">
                        <option value="0">10 أيام</option>
                        <option value="1">30 يوم</option>
                    </select>
                    <b>المدينة</b>
                    <select id="cityF" onchange="changer()">
                        <option value="0">الحسيمة والبوران</option>
                        <option value="1">الحسيمة</option>
                        <option value="2">البوران</option>
                    </select>
                    <b>نوع الهزة </b>
                    <select id="typeF" onchange="changer()">
                        <option value="0">جميع الهزات</option>
                        <option value="1">قوية ومتوسطة وضعيفة</option>
                        <option value="2">قوية ومتوسطة</option>
                        <option value="3">قوية</option>
                    </select>
                 </div>
                <hr/>
                 <div style="height:245px"><canvas id="myChart" style="height:200px"></canvas></div>
                <script>
                    var dy = days(10);
                    var vl = new Array(dy.length);
                    for(var i=0;i<vl.length;i++)
                        vl[i] = 0;
                    for(var i=0;i<locationa.length;i++){
                        day = new Date(locationa[i][0]).getDate();
                        if(day != 'NaN' && locationa[i][1] >= 0){
                            for(var j=0;j<dy.length;j++){
                                if(dy[j] == parseInt(day)){
                                    vl[j]++;
                                    break;
                                }
                            }
                        }
                    }
                    var data = {
                        labels: dates(10),
                        datasets: [
                            {
                                label: "My First dataset",
                                fillColor: "rgba(151,187,205,0.2)",
                                strokeColor: "rgba(151,187,205,1)",
                                pointColor: "rgba(151,187,205,1)",
                                pointStrokeColor: "#fff",
                                pointHighlightFill: "#fff",
                                pointHighlightStroke: "rgba(151,187,205,1)",
                                data: vl
                            }
                        ]
                    };
                    var ctx = document.getElementById("myChart").getContext("2d");
                    var myLineChart = new Chart(ctx).Line(data,{responsive: true,maintainAspectRatio: false});
                </script>
            </div>
        </div>
        <hr class="soften"/>
        <div class="row" style="background-color:white"><br>
            <div class="col-md-4" align="center">
                <script type="text/javascript" src="http://www.easypolls.net/ext/scripts/emPoll.js?p=56ee2e2ae4b0f5ccafb449ec"></script><a class="OPP-powered-by" href="http://www.objectplanet.com/opinio/" style="text-decoration:none;"><div style="font: 9px arial; color: gray;"></div></a><br>
            </div>
            <div class="col-md-4" align="center">
                <script type="text/javascript" src="http://www.easypolls.net/ext/scripts/emPoll.js?p=56ee2e56e4b0f5ccafb449ed"></script><a class="OPP-powered-by" href="https://www.easypolls.net/" style="text-decoration:none;"><div style="font: 9px arial; color: gray;"></div></a><br>
            </div>
            <div class="col-md-4" align="center">
                <script type="text/javascript" src="https://host1.easypolls.net/ext/scripts/emPoll.js?p=56ee26f5e4b0f5ccafb449de"></script><a class="OPP-powered-by" href="https://www.murvey.com" style="display:none;text-decoration:none;"></a><br>
            </div>
        </div>
    </div>
     <script type="text/javascript">
            $(function() {
                $('#arrestedDevelopment').scrollTableBody();
            });
        </script>
    <script>
        function changer(){
            var d = document.getElementById("daysF").value;
            var c = document.getElementById("cityF").value;
            var t = document.getElementById("typeF").value;
            var city = [];
            var strong = 0;
            if(d=='0'){
                dt = dias10;
                ydat = days(10);
                xdat = dates(10);
            }
            if(d=='1'){
                dt = dias30;
                ydat = days(30);
                xdat = dates(30);
            }
            if(c=='0')
                city = ['ALBOR','ALHUCEMAS'];
            if(c=='1')
                city = ['ALHUCEMAS'];
            if(c=='2')
                city = ['ALBOR'];
            if(t=='0')
                strong = 0;
            if(t=='1')
                strong = 1;
            if(t=='2')
                strong = 2;
            if(t=='3')
                strong = 3;
            var locationF = new Array(dt.features.length)
                for (i=0; i <locationF.length; i++)
                    locationF[i]=new Array(2);
            var status = 0;
            var j = 0;
            for(var i=0;i<locationF.length;i++){
                for(var k=0;k<city.length;k++){
                    if(dt.features[i].properties.loc.indexOf(city[k]) > -1){
                        status = 1;
                        break;
                    }
                    else
                        status = 0;
                }
                if(status == 1){
                    locationF[j][0] = dt.features[i].properties.fecha;
                    locationF[j][1] = dt.features[i].properties.typeplot;
                    j++;
                }
            }
            var vls = new Array(ydat.length);
            for(var i=0;i<vls.length;i++)
                vls[i] = 0;
            for(var i=0;i<locationF.length;i++){
                day = new Date(locationF[i][0]).getDate();
                if(day != 'NaN' && locationF[i][1] >= strong){
                    for(var j=0;j<ydat.length;j++){
                        if(ydat[j] == parseInt(day)){
                            vls[j]++;
                            break;
                        }
                    }
                }       
            }
            var data = {
                labels: xdat,
                datasets: [
                    {
                        label: "My First dataset",
                        fillColor: "rgba(151,187,205,0.2)",
                        strokeColor: "rgba(151,187,205,1)",
                        pointColor: "rgba(151,187,205,1)",
                        pointStrokeColor: "#fff",
                        pointHighlightFill: "#fff",
                        pointHighlightStroke: "rgba(151,187,205,1)",
                        data: vls
                    }
                ]
            };
            myLineChart.destroy();
            myLineChart = new Chart(ctx).Line(data,{responsive: true,maintainAspectRatio: false});
        }
        function changertime(){
            var d = document.getElementById("daysS").value;
            var c = document.getElementById("cityS").value;
            var t = document.getElementById("typeS").value;
            var city = [];
            var strong = 0;
            if(d=='0'){
                dt = dias10;
                ydat = days(10);
                xdat = dates(10);
            }
            if(d=='1'){
                dt = dias30;
                ydat = days(30);
                xdat = dates(30);
            }
            if(c=='0')
                city = ['ALBOR','ALHUCEMAS'];
            if(c=='1')
                city = ['ALHUCEMAS'];
            if(c=='2')
                city = ['ALBOR'];
            if(t=='0')
                strong = 0;
            if(t=='1')
                strong = 1;
            if(t=='2')
                strong = 2;
            if(t=='3')
                strong = 3;
            var locationF = new Array(dt.features.length)
                for (i=0; i <locationF.length; i++)
                    locationF[i]=new Array(2);
            var status = 0;
            var j = 0;
            for(var i=0;i<locationF.length;i++){
                for(var k=0;k<city.length;k++){
                    if(dt.features[i].properties.loc.indexOf(city[k]) > -1){
                        status = 1;
                        break;
                    }
                    else
                        status = 0;
                }
                if(status == 1){
                    locationF[j][0] = dt.features[i].properties.fecha;
                    locationF[j][1] = dt.features[i].properties.typeplot;
                    j++;
                }
            }
            var hours = [];
            for(var i = 0; i< 24; i++)
                hours[i] = 0;
            for(var i=0;i<locationF.length;i++){
                hour = new Date(locationF[i][0]).getHours();
                if(hour != 'NaN' && locationF[i][1] >= strong){
                    hours[parseInt(hour)]++;
                }
            }
            var data = {
                labels: ['00:00','01:00','02:00','03:00','04:00','05:00','06:00','07:00','08:00','09:00',
                        '10:00','11:00','12:00','13:00','14:00','15:00','16:00','17:00','18:00','19:00','20:00',
                        '21:00','22:00','23:00'],
                datasets: [
                    {
                        label: "عدد الهزات",
                        fillColor: "rgba(151,187,205,0.2)",
                        strokeColor: "rgba(151,187,205,1)",
                        pointColor: "rgba(151,187,205,1)",
                        pointStrokeColor: "#fff",
                        pointHighlightFill: "#fff",
                        pointHighlightStroke: "rgba(151,187,205,1)",
                        data: hours
                    }
                ]
            };
            mLineChart.destroy();
            mLineChart = new Chart(ctx1).Line(data,{responsive: true,maintainAspectRatio: false});
        }
    </script>
    <footer class="footer-basic-centered">

			<p class="footer-company-motto">Rif Map.</p>

			<p class="footer-links">
				<a href="contactus.html">إتصل بنا</a>
				·
				<a href="services.html">خدمات</a>
				·
				<a href="/">الرئيسية</a>
			</p>

			<p class="footer-company-name">Rif Map &copy; 2016</p>

    </footer>
</body>

</html>
